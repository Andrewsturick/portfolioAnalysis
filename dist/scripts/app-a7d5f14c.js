"use strict";angular.module("inspinia",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","firebase","ngFileUpload","ngCsvImport"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("index",{"abstract":!0,url:"/index",templateUrl:"components/common/content.html"}).state("index.login",{url:"/login",templateUrl:"app/main/login.html",data:{pageTitle:"Login",specialClass:"gray-bg"}}).state("index.upload",{url:"/upload",templateUrl:"app/upload/upload.html",controller:"UploadCtrl",data:{pageTitle:"Upload"}}).state("index.table",{url:"/table",templateUrl:"app/table/table.html",controller:"tableCtrl",data:{pageTitle:"Table"}}),t.otherwise("/index/login")}]).factory("Auth",["$firebaseAuth",function(e){var t=new Firebase("https://optionsjs.firebaseio.com");return e(t)}]),angular.module("inspinia").controller("UploadCtrl",["$scope","Auth","$http","Upload","$location",function(e,t,a,i,o){var n=new Firebase("https://optionsjs.firebaseio.com/users"),s=new Firebase("https://optionsjs.firebaseio.com/csvs"),l=n.getAuth();l||o.path("/index/login"),s.on("value",function(e){console.log(e.val()),console.log(e.key())}),e.csv={content:null,header:!0,headerVisible:!0,separator:",",separatorVisible:!0,result:null,encoding:"ISO-8859-1",encodingVisible:!0};var r=function(e){e?console.log("Synchronization failed"):o.path("/index/table")};e.uploadFile=function(e){s.child(l.uid).update({csv:e,id:l.uid},r)}}]),angular.module("inspinia").controller("tableCtrl",["$scope","Auth","$firebaseObject","$location","$timeout",function(e,t,a,i,o){var n=t.$getAuth(),s=new Firebase("https://optionsjs.firebaseio.com/users/"+n.uid+"/currentPortfolio/equities"),l=new Firebase("https://optionsjs.firebaseio.com/portfolio/equities"),r=new Firebase("https://optionsjs.firebaseio.com/portfolio/options");n?o(function(){e.portfolio=a(s),e.equitiesTracker=a(l),e.optionsTracker=a(r),e.portfolio.$value||i.path("/index/upload")}):i.path("/index/login"),e.isShowing,e.showPositionAndStock=function(t){e.isShowing=t,console.log(t),console.log("//////////",e.equitiesTracker[e.isShowing].currentQuote.Bid)},e.changeIsPositive=function(e){return Number(e.replace("%","").replace("+",""))>=0},e.changeIsNegative=function(e){return Number(e.replace("%","").replace("+",""))<=0}}]),angular.module("inspinia").controller("MainCtrl",["$scope","Auth","$location",function(e,t,a){e.auth=t,t.$onAuth(function(t){function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}if(t){e.authData=t,e.userName=i(t.google.cachedUserProfile.given_name),e.userImage=t.google.cachedUserProfile.picture,a.path("/index/table");var o=t.uid,n={name:t.google.displayName,img:t.google.profileImageURL},s=new Firebase("https://optionsjs.firebaseio.com/users");s.child(o).update(n)}}),e.logout=function(){t.$unauth(),e.authData=null,a.path("/index/login")}}]),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),a=$("#page-wrapper").height();t>a&&$("#page-wrapper").css("min-height",t+"px"),a>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(t>a?$("#page-wrapper").css("min-height",t-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),angular.module("inspinia").directive("sideNavigation",["$timeout",function(e){return{restrict:"A",link:function(t,a){t.$watch("authentication.user",function(){e(function(){a.metisMenu()})})}}}]).directive("minimalizaSidebar",["$timeout",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(t){t.minimalize=function(){angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(400)},200)):angular.element("#side-menu").removeAttr("style")}}]}}]),angular.module("inspinia").run(["$templateCache",function(e){e.put("app/main/login.html",'<div class="middle-box text-center loginscreen animated fadeInDown"><div><div><h1 class="logo-name">RT+</h1></div><h3>Rooftop Trading</h3><p>See your Think or Swim Portfolio come alive:<br></p><div ng-hide="false"><button ng-click="auth.$authWithOAuthPopup(\'google\')" class="btn btn-primary block full-width m-b">Login with Google</button></div><p class="m-t"><small></small></p></div></div>'),e.put("app/table/table.html",'<div class="col-sm-4 col-xs-12" id="equities-dashboard-panel-1"><div ng-if="isShowing" class="panel-1-info-wrapper"><div class="top-row-in-dashboard-1"><span class="col-xs-3 dashboard-symbol-h1">{{equitiesTracker[isShowing].currentQuote.Symbol}}</span> <span class="col-xs-4 pull-right highs-and-lows"><p class="pull-right" id="hi">Hi: {{equitiesTracker[isShowing].currentQuote.DaysHigh}}</p><p class="pull-right" id="low">Low: {{equitiesTracker[isShowing].currentQuote.DaysLow}}</p></span></div><span><h2 class="dashboard-quote-h2 col-center">{{equitiesTracker[isShowing].currentQuote.LastTradePriceOnly}}</h2></span><h3 class="current-symbol-change" ng-class="{green : changeIsPositive(equitiesTracker[isShowing].currentQuote.ChangeinPercent), red : changeIsNegative(equitiesTracker[isShowing].currentQuote.ChangeinPercent)}">{{equitiesTracker[isShowing].currentQuote.Change}} <span>({{equitiesTracker[isShowing].currentQuote.ChangeinPercent}})</span></h3></div></div><table st-table="portfolio" class="table equities-table"><thead class="thead"><th st-sort="Symbol">Symbol</th><th st-sort="Change">Change(%)</th><th st-sort="Mark">Mark</th><th st-sort="Qty">Qty</th><th st-sort="trade_price">Trade Price</th><th st-sort="trade_price">Total Exposure</th></thead><tbody><tr class="equities-portfolio-row" ng-click="showPositionAndStock(v.Symbol)" ng-repeat="(i, v) in portfolio"><td><p class="table-text">{{v.Symbol}}</p></td><td><p class="table-text">{{equitiesTracker[v.Symbol].currentQuote.Change}} ({{equitiesTracker[v.Symbol].currentQuote.ChangeinPercent}})</p></td><td><p class="table-text">{{equitiesTracker[v.Symbol].currentQuote.LastTradePriceOnly}}</p></td><td><p class="table-text">{{v.Qty}}</p></td><td><p class="table-text">{{v.Trade_Price}}</p></td><td><p class="table-text">{{(+v.Qty)*(+equitiesTracker[v.Symbol].currentQuote.LastTradePriceOnly) | currency}}</p></td></tr></tbody></table>'),e.put("app/upload/upload.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="text-center m-t-lg"><div><ng-csv-import content="csv.content" header="csv.header" separator="csv.separator" result="csv.result" accept="csv.accept"></ng-csv-import></div><button ng-click="uploadFile(csv.content)" class="btn btn-primary block m-b">Upload Portfolio</button></div></div></div></div>'),e.put("components/common/content.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg {{$state.current.name}}"><div ng-include="\'components/common/topnavbar.html\'"></div><div ui-view=""></div><div ng-include="\'components/common/footer.html\'"></div></div></div>'),e.put("components/common/footer.html",'<div class="footer"></div>'),e.put("components/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown=""><a ng-click="showhide()"><i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href="" dropdown-toggle=""><i class="fa fa-wrench"></i></a><ul class="dropdown-menu dropdown-user"><li><a href="">Config option 1</a></li><li><a href="">Config option 2</a></li></ul><a ng-click="closebox()"><i class="fa fa-times"></i></a></div>'),e.put("components/common/login_two_columns.html",'<div class="loginColumns animated fadeInDown"><div class="row"><div class="col-md-6"><h2 class="font-bold">Welcome to IN+</h2><p>Perfectly designed and precisely prepared admin theme with over 50 pages with extra new web app views.</p><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s.</p><p>When an unknown printer took a galley of type and scrambled it to make a type specimen book.</p><p><small>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</small></p></div><div class="col-md-6"><div class="ibox-content"><form class="m-t" role="form" action="index.html"><div class="form-group"><input type="email" class="form-control" placeholder="Username" required=""></div><div class="form-group"><input type="password" class="form-control" placeholder="Password" required=""></div><button type="submit" class="btn btn-primary block full-width m-b">Login</button> <a href="#"><small>Forgot password?</small></a><p class="text-muted text-center"><small>Do not have an account?</small></p><a class="btn btn-sm btn-white btn-block" href="register.html">Create an account</a></form><p class="m-t"><small>Inspinia we app framework base on Bootstrap 3 &copy; 2014</small></p></div></div></div><hr><div class="row"><div class="col-md-6">Copyright Example Company</div><div class="col-md-6 text-right"><small>Â© 2014-2015</small></div></div></div>'),e.put("components/common/navigation.html",'<nav class="navbar-default navbar-static-side" role="navigation"><span ng-show="authData"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header"><div class="dropdown profile-element" dropdown=""><img alt="image" class="img-circle profile-img-google" ng-src="{{userImage}}"> <a class="dropdown-toggle" dropdown-toggle="" href=""><span class="clear"><span class="block m-t-xs"><strong class="font-bold">Howdy, {{userName}}</strong></span></span></a><ul class="dropdown-menu animated fadeInRight m-t-xs"></ul></div><div class="logo-element">RT+</div></li><li ui-sref-active="active"><a ui-sref="index.table"><i class="fa fa-laptop"></i> <span class="nav-label">Portfolio</span></a></li><li ui-sref-active="active"><a ui-sref="index.upload"><i class="fa fa-upload"></i> <span class="nav-label">Upload</span></a></li></ul></div></span></nav>'),e.put("components/common/topnavbar.html",'<div class="row border-bottom"><nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0"><div class="navbar-header"><span minimaliza-sidebar=""></span></div><ul class="nav navbar-top-links navbar-right"><li><div ng-show="authData"><button type="button" class="btn btn-default navbar-btn navbar-right" ng-click="logout()">Logout</button></div></li></ul></nav></div>')}]);